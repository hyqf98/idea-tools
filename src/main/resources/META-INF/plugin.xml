<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>io.github.easy.tools</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>Idea Tools</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor url="https://github.com/easy-tools">Easy Tools</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
      Easy Tools for IntelliJ IDEA - Enhancing Java development with powerful documentation capabilities and API management.<br/>
      Features include:<br/>
      - Customizable JavaDoc templates (class, field, method)<br/>
      - Context menu actions for generating/removing comments<br/>
      - Velocity template engine support<br/>
      - Extensible architecture for future enhancements<br/>
      - Property name conversion utilities<br/>
      - API interface management with Spring MVC and Swagger/OpenAPI annotation support<br/>
      &nbsp;&nbsp;* Scan and display all REST APIs in your project<br/>
      &nbsp;&nbsp;* Display Controller descriptions from Swagger/OpenAPI annotations<br/>
      &nbsp;&nbsp;* Group APIs by Controller for better organization<br/>
      &nbsp;&nbsp;* Support for @RestController, @Controller, and various HTTP method annotations<br/>
      &nbsp;&nbsp;* Support for Swagger/OpenAPI annotations (@Operation, @Tag, etc.)<br/>
      &nbsp;&nbsp;* Recursive annotation processing for meta-annotations<br/>
      &nbsp;&nbsp;* Search and filter APIs by name, URL, method, or class<br/>
      &nbsp;&nbsp;* Quick API search with Ctrl+\ shortcut for fast navigation<br/>
    ]]></description>

    <!-- Product and plugin compatibility requirements. -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>

    <!-- Plugin metadata -->
    <change-notes><![CDATA[
    Added API management functionality:<br/>
    - API interface management panel in IDEA's right sidebar<br/>
    - Spring MVC annotation support (@RestController, @Controller, @RequestMapping, etc.)<br/>
    - Recursive annotation processing for meta-annotations<br/>
    - Support for custom composite annotations (e.g., @RestControllerWrapper)<br/>
    - Support for Swagger/OpenAPI annotations (@Operation, @Tag, etc.)<br/>
    - Display Controller descriptions from Swagger/OpenAPI annotations<br/>
    - Group APIs by Controller in tree structure view<br/>
    - Fixed API path parameter display issues (missing closing braces)<br/>
    - Fixed double-click navigation issue in tree view<br/>
    - Fixed plugin startup and navigation issues by removing PSI element serialization<br/>
    - Fixed tree node object handling for proper navigation<br/>
    - Fixed custom tree node implementation to properly store and retrieve API info<br/>
    - Fixed infinite recursion issue when processing circular annotation references<br/>
    - Fixed thread safety issues when accessing PSI elements<br/>
    - Implemented incremental scanning with real-time UI updates<br/>
    - Search and filter APIs by name, URL, method, or class<br/>
    - Double-click to navigate to the corresponding Java method<br/>
    - Refactored annotation processing logic into separate adapter classes for better extensibility<br/>
    - Added quick API search dialog with Ctrl+\ shortcut<br/>
    - Fixed API search dialog to only show results after typing<br/>
    - Fixed keyboard navigation issues in API search dialog<br/>
    - Optimized API search dialog UI to dynamically show/hide result panel<br/>
    - Improved API search performance with debouncing and parallel processing<br/>
    - Fixed API search dialog startup performance issues<br/>
    - Adjusted API search result list height for better visibility<br/>
    - Removed OK/Cancel buttons from API search dialog<br/>
    - Fixed API search to automatically trigger on typing without requiring Enter key<br/>
    - Fixed API data loading issues in search dialog<br/>
    - Fixed API data loading consistency between search dialog and management panel<br/>
    - Fixed thread pool rejection issues in API search dialog<br/>
    - Fixed API search dialog show method execution timing<br/>
    <br/>
    Added property name conversion functionality:<br/>
    - Convert selected property names between different formats<br/>
    - Context menu action for property conversion<br/>
    - Keyboard shortcut support (Ctrl+Shift+U)<br/>
    ]]></change-notes>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="io.github.easy.tools.ui.config.DocConfigService"/>
        <applicationConfigurable
                parentId="other"
                instance="io.github.easy.tools.ui.config.DocConfig"
                id="io.github.easy.tools.ui.config.TemplateConfig"
                displayName="Easy Config">
            <configurable instance="io.github.easy.tools.ui.config.DocConfig" id="io.github.easy.tools.ui.config.BaseTemplateConfig" displayName="Base Template"/>
            <configurable instance="io.github.easy.tools.ui.config.LLMConfig" id="io.github.easy.tools.ui.config.LLMConfig" displayName="LLM Config"/>
        </applicationConfigurable>
        <applicationService serviceImplementation="io.github.easy.tools.action.doc.listener.FileSaveListenerManager"/>
        <notificationGroup id="Easy Docs Notification Group"
                           displayType="BALLOON"
                           key="notification.group.name"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow id="API Manager" secondary="true" anchor="right"
                    factoryClass="io.github.easy.tools.ui.api.ApiManagerToolWindowFactory"/>
    </extensions>

    <applicationListeners>
        <listener class="io.github.easy.tools.action.doc.listener.FileSaveListenerManager"
                  topic="com.intellij.ide.AppLifecycleListener"/>
    </applicationListeners>

    <actions>
        <group id="JavaDocMenus" popup="true" description="Java Doc" text="Java Doc">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <action id="GenerateFileCommentAction"
                    class="io.github.easy.tools.action.doc.actions.GenerateFileCommentAction"
                    text="当前文件生成注释"
                    description="当前文件生成注释">
                <keyboard-shortcut keymap="$default" first-keystroke="alt shift J"/>
            </action>
            <action id="GenerateElementCommentAction"
                    class="io.github.easy.tools.action.doc.actions.GenerateElementCommentAction"
                    text="当前元素生成注释"
                    description="当前元素生成注释">
                <keyboard-shortcut keymap="$default" first-keystroke="alt J"/>
            </action>
            <action id="RemoveElementCommentsAction"
                    class="io.github.easy.tools.action.doc.actions.RemoveElementCommentsAction"
                    text="删除当前元素注释"
                    description="删除当前元素注释"/>
            <action id="RemoveFileCommentsAction"
                    class="io.github.easy.tools.action.doc.actions.RemoveFileCommentsAction"
                    text="删除当前文件注释"
                    description="删除当前文件注释"/>
        </group>
        
        <group id="PropertyConversionGroup" text="属性转换" description="Property Conversion">
            <add-to-group group-id="EditorPopupMenu" anchor="after" relative-to-action="JavaDocMenus"/>
            <action id="PropertyConversionAction"
                    class="io.github.easy.tools.action.conversion.PropertyConversionAction"
                    text="转换选中属性"
                    description="将选中的属性名转换为不同格式">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift U"/>
            </action>
        </group>
        
        <!-- API搜索动作 -->
        <action id="ApiSearchAction" 
                class="io.github.easy.tools.action.api.ApiSearchAction" 
                text="API搜索" 
                description="搜索并跳转到API接口">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl BACK_SLASH"/>
        </action>
    </actions>
</idea-plugin>